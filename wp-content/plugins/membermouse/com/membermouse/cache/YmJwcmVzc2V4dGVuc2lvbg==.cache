/**
 * 
 * MemberMouse(TM) (http://www.membermouse.com)
 * (c) MemberMouse, LLC. All rights reserved.
 *
 */
class MM_BBPressExtension extends MM_Extension
{	
	protected static $OPTION_ACTIVE = "active";
	
	public function __construct() 
	{ 
		parent::__construct();
		$this->token = MM_Extension::$BBPRESS_TOKEN;
	}
	
	public function doInitHook() 
	{
		if($this->isActive() && $this->hasPermission())
		{
			
		}
	}
	
	public function isActive()
	{
		// check if Limit Login Attempts plugin is active
		$plugins = get_option('active_plugins');
		$required_plugin = "MemberMousebbPress/index.php";
		$isActive = false;
		
		if(in_array($required_plugin, $plugins))
		{
			$isActive = true;
		}
		
		return $isActive && $this->hasPermission();
	}
	
	public function hasPermission()
	{
		return true;
	}

	public function displayListingItem() 
	{
		$crntPage = MM_ModuleUtils::getPage();
		$extUrl = MM_ModuleUtils::getUrl($crntPage, MM_MODULE_EXTENSIONS)."&".MM_session::$PARAM_SUBMODULE."=".MM_Extension::$BBPRESS_TOKEN;
		?>
		<div class="mm-extension <?php echo $this->isActive() ? 'mm-extension-active' : ''; ?>">
		<a href="<?php echo $extUrl; ?>"><img src="https://dl.dropboxusercontent.com/u/265387542/plugin_images/logos/extensions-bbpress.jpg" /></a>
		</div>
		<?php
	}
	
	public function displayConfigScreen() 
	{ 
	?>
		
		<div style="background-color:#FFF; padding:10px; width:260px;">
			<img src="https://dl.dropboxusercontent.com/u/265387542/plugin_images/logos/extensions-bbpress.jpg" style="width:260px;" />
		</div>
		
		<div style="margin-bottom:15px;">
			<a href="http://support.membermouse.com/knowledgebase/articles/319246-bbpress-extension" target="_blank">Need help configuring the bbPress extension?</a>
		</div>
		
		<p style="width:600px; font-size:12px;">
		bbPress was built by the creators of WordPress and enables forum functionality on your WordPress site. Using this 
		extension you'll be able to protect bbPress forums based on a member's access rights in MemberMouse. In order 
		to use this extension, the bbPress plugin must be installed and activated.
		</p>
		
		<p>
			<?php if(!$this->isActive()) { ?>
			<a href="https://dl.dropboxusercontent.com/u/265387542/extensions/MemberMousebbPress.zip" class="mm-ui-button green"><?php echo MM_Utils::getIcon('download', '', '1.3em', '2px'); ?> Download bbPress Extension</a>
			<?php } else { ?>
			<?php echo MM_Utils::getCheckIcon(); ?> bbPress Extension Activated
			<?php } ?>
			
			<?php 
			$plugins = get_option('active_plugins');
			$required_plugin = "bbpress/bbpress.php";
			
			if(!in_array($required_plugin, $plugins))
			{
			?>
			<a href="http://bbpress.org" class="mm-ui-button blue" style="margin-left:10px;"><?php echo MM_Utils::getIcon('download', '', '1.3em', '2px'); ?> Download bbPress</a>
			<?php } else { ?>
			<span style="margin-left:10px;"><?php echo MM_Utils::getCheckIcon(); ?> bbPress Activated</span>
			<?php } ?>
		</p>
	<?php
	}
}
